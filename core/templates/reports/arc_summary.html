{% extends 'reports/base_report.html' %}

{% block report_title %}ARC Summary Report{% endblock %}

{% block report_icon %}
<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
</svg>
{% endblock %}

{% block report_heading %}ðŸ“Š ARC Summary Report{% endblock %}
{% block report_description %}Daily attendance summary with mandays and overtime{% endblock %}

{% block extra_css %}
<style>
    /* Sticky table header on page scroll */
    .page-sticky-header thead {
        position: sticky;
        top: 0;
        z-index: 100;
        background: #4A70A9 !important;
    }
    
    .page-sticky-header thead th {
        background: #4A70A9 !important;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        white-space: nowrap !important;
        vertical-align: middle !important;
        padding: 16px 20px !important;
        font-size: 11px !important;
        letter-spacing: 0.8px;
        font-weight: 700 !important;
        text-transform: uppercase;
        border-right: 2px solid rgba(239, 236, 227, 0.3) !important;
    }
    
    .page-sticky-header thead th:last-child {
        border-right: none !important;
    }
    
    .page-sticky-header tbody td {
        white-space: nowrap;
        padding: 14px 20px !important;
        border-right: 1px solid rgba(143, 171, 212, 0.2);
        font-size: 12px;
        vertical-align: middle !important;
    }
    
    .page-sticky-header tbody td:last-child {
        border-right: none;
    }
    
    /* Ensure first row has proper spacing from sticky header */
    .page-sticky-header tbody tr:first-child td {
        padding-top: 14px !important;
    }
</style>
{% endblock %}

{% block report_content %}
<div class="bg-white border border-light-blue rounded-xl overflow-hidden">
    <div class="overflow-x-auto">
        <table class="w-full text-left text-black text-sm min-w-max page-sticky-header">
            <thead class="text-xs font-bold uppercase bg-dark-blue text-cream">
                <tr>
                    <th class="border-r border-cream/20" style="min-width: 120px;">EP NO</th>
                    <th class="border-r border-cream/20" style="min-width: 150px;">NAME</th>
                    <th class="border-r border-cream/20" style="min-width: 100px;">DATE</th>
                    <th class="border-r border-cream/20" style="min-width: 100px;">CONT CODE</th>
                    <th class="border-r border-cream/20" style="min-width: 120px;">TRADE</th>
                    <th class="border-r border-cream/20" style="min-width: 120px;">CONTRACT</th>
                    <th class="border-r border-cream/20" style="min-width: 90px;">MANDAYS</th>
                    <th class="border-r border-cream/20" style="min-width: 100px;">REGULAR HR</th>
                    <th style="min-width: 80px;">OT</th>
                </tr>
            </thead>
            <tbody>
                {% for record in page_obj %}
                <tr class="{% cycle 'bg-white' 'bg-cream/30' %} hover:bg-light-blue/20 transition border-b border-light-blue/50">
                    <td class="font-bold text-dark-blue">{{ record.ep_no }}</td>
                    <td>{{ record.ep_name }}</td>
                    <td class="text-center">{{ record.date|date:"d/m/Y" }}</td>
                    <td class="text-xs">{{ record.cont_code|default:record.company.name }}</td>
                    <td class="text-xs">{{ record.trade|default:"-" }}</td>
                    <td class="text-xs">{{ record.contract|default:"-" }}</td>
                    <td class="text-center font-semibold">{{ record.mandays|default:"-" }}</td>
                    <td class="text-center">{{ record.regular_manday_hr|default:"-" }}</td>
                    <td class="text-center font-semibold">{{ record.ot|default:"-" }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="9" class="px-3 py-8 text-center text-black/50">
                        <svg class="w-12 h-12 mx-auto mb-2 text-black/30" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
                        </svg>
                        <p class="font-semibold">No records found</p>
                        <p class="text-xs mt-1">Try adjusting your filters</p>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
