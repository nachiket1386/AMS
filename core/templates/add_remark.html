{% extends 'base.html' %}

{% block title %}Add Remark - Attendance Management System{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto space-y-6">
    <!-- Header -->
    <div class="flex items-center gap-4">
        <a href="{% url 'core:attendance_list' %}" class="p-2 hover:bg-light-blue rounded-lg transition">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
        </a>
        <div>
            <h1 class="text-3xl font-extrabold text-black">Add Remark</h1>
            <p class="text-black/70 mt-1">Add remarks for attendance record</p>
        </div>
    </div>

    <!-- Record Info Card -->
    <div class="bg-cream border border-light-blue rounded-2xl p-6">
        <h2 class="text-lg font-bold text-black mb-4">Attendance Record Details</h2>
        <div class="grid grid-cols-2 gap-4">
            <div>
                <p class="text-sm text-black/60 font-semibold">EP Number</p>
                <p class="text-lg font-bold text-dark-blue font-mono">{{ record.ep_no }}</p>
            </div>
            <div>
                <p class="text-sm text-black/60 font-semibold">Employee Name</p>
                <p class="text-lg font-bold text-black">{{ record.get_display_name }}</p>
            </div>
            <div>
                <p class="text-sm text-black/60 font-semibold">Date</p>
                <p class="text-lg font-bold text-black">{{ record.date|date:"d M Y" }}</p>
            </div>
            <div>
                <p class="text-sm text-black/60 font-semibold">Status</p>
                <p class="text-lg font-bold text-black">{{ record.status }}</p>
            </div>
        </div>
    </div>

    <!-- Add Remark Form -->
    <form method="post" class="bg-white border-2 border-dark-blue rounded-2xl p-6 space-y-6">
        {% csrf_token %}
        
        <div>
            <label for="reason" class="block text-sm font-bold text-black mb-2">
                Reason/Category <span class="text-red-500">*</span>
            </label>
            <select 
                name="reason" 
                id="reason" 
                required
                class="w-full px-4 py-3 bg-cream border-2 border-light-blue rounded-xl focus:ring-2 focus:ring-dark-blue focus:border-transparent transition text-black">
                <option value="">-- Select Reason --</option>
                {% for reason in reasons %}
                <option value="{{ reason.id }}">{{ reason.reason }}</option>
                {% endfor %}
            </select>
            <p class="text-xs text-black/60 mt-1">Select the category that best describes your remark</p>
        </div>

        <div>
            <label for="remarks_text" class="block text-sm font-bold text-black mb-2">
                Remarks/Comments <span class="text-red-500">*</span>
            </label>
            <textarea 
                name="remarks_text" 
                id="remarks_text" 
                rows="6"
                required
                placeholder="Enter detailed remarks about overtime, regularization, or any other attendance-related issues..."
                class="w-full px-4 py-3 bg-cream border-2 border-light-blue rounded-xl focus:ring-2 focus:ring-dark-blue focus:border-transparent transition text-black resize-none"></textarea>
            <p class="text-xs text-black/60 mt-1">Provide detailed information to help admin understand the situation</p>
        </div>

        <div class="flex gap-3">
            <button 
                type="submit"
                class="flex-1 bg-dark-blue text-cream px-6 py-3 rounded-xl font-bold hover:bg-black transition flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                Submit Remark
            </button>
            <a 
                href="{% url 'core:attendance_list' %}"
                class="flex-1 bg-light-blue text-black px-6 py-3 rounded-xl font-bold hover:bg-light-blue/70 transition text-center">
                Cancel
            </a>
        </div>
    </form>

    <!-- Info Box -->
    <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
        <div class="flex gap-3">
            <svg class="w-6 h-6 text-blue-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <div>
                <p class="font-semibold text-blue-900 text-sm">Note</p>
                <p class="text-blue-800 text-sm mt-1">
                    Your remark will be reviewed by the admin. Please provide clear and detailed information to help them understand and process your request.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
